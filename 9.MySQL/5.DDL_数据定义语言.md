> DDL是数据库定义语言，是用来定义数据库对象(数据库、表、字段)，我将DDL分成两个部分来讲解：
>
> - DDL于数据库
> - DDL于表



# DDL于库

> 分成4个方面：
>
> - 查询数据库
> - 创建数据库
> - 使用数据库
> - 删除数据库



## 查询数据库

> 查询所有数据库：

```sql
show databases;
```

![image-20240313204138375](D:\text1\9.MySQL\assets\image-20240313204138375.png)

> 查询出6个数据库，abi和mydatabase1是我自己创建的，其余都是系统数据库。
>
> 查看当前正在使用的数据库：

```sql
select database();
```

![image-20240313205150864](D:\text1\9.MySQL\assets\image-20240313205150864.png)

> database()相当于MySQL中的函数，就像是调用这个函数一样。



## 创建数据库

```sql
create database [if not exists] 库名;
```

![image-20240313204406382](D:\text1\9.MySQL\assets\image-20240313204406382.png)

![image-20240313204420937](D:\text1\9.MySQL\assets\image-20240313204420937.png)

> if not exists是创建数据库命令的可选项，表示这个数据库不存在才创建如果存在，则不创建，也不报错。
>
> 如果创建同名数据库会报错：

![image-20240313204704800](D:\text1\9.MySQL\assets\image-20240313204704800.png)

> 加上if not exists不会报错，但也不会创建：

![image-20240313204807337](D:\text1\9.MySQL\assets\image-20240313204807337.png)



## 切换数据库

> 也叫使用数据库：

```sql
use 库名;
```

![image-20240313204931082](D:\text1\9.MySQL\assets\image-20240313204931082.png)



## 删除数据库

```sql
drop database [if exists] 库名;
```

![image-20240313205338825](D:\text1\9.MySQL\assets\image-20240313205338825.png)

> if exists是删除命令的可选择，表示数据库存在再删除，如果不存在不报错也不执行SQL，如果数据库不存在直接删会报错：

![image-20240313205555318](D:\text1\9.MySQL\assets\image-20240313205555318.png)



# DDL于表

> 也包含4个方面：
>
> - 创建表
> - 查询表
> - 修改表
> - 删除表



## 创健表

```sql
-- []表示可选项，comment是注释关键字
create table 表名(
	字段1 字段类型 [约束] [comment 字段1注释],
	字段2 字段类型 [约束] [comment 字段2注释],
    ...
	字段n 字段类型 [约束] [comment 字段n注释]
)[comment 表注释];
```

![image-20240314220907624](D:\text1\9.MySQL\assets\image-20240314220907624.png)

> 执行结果：

![image-20240314220942327](D:\text1\9.MySQL\assets\image-20240314220942327.png)





### 约束

> 我们用图形化界面增加两条数据，添加完点![image-20240314221421053](D:\text1\9.MySQL\assets\image-20240314221421053.png)才能提交到数据库：

![image-20240314221451459](D:\text1\9.MySQL\assets\image-20240314221451459.png)

> 虽然id我要求是唯一标识，但是这里id重复了，不满足唯一标识。这是因为在数据库层面没有给这个字段进行限制，我们需要使用约束进行限制。
>
> 约束：
>
> - 概念：约束是作用在表中字段上的的规则，用于限制表中的数据存储。
> - 目的：保证表中数据正确性、有效性和完整性。
>
> 约束是作用在字段上的，用来限制字段中存储的数据。
>
> 在MySQL中的约束：

| 约束 | 描述                                             | 关键字      |
| ---- | ------------------------------------------------ | ----------- |
| 空   | 字段允许为空，字段的默认约束，可以不写           | null        |
| 非空 | 限制字段值不能为null                             | not null    |
| 唯一 | 保证字段的所有数据都唯一，不重复                 | unique      |
| 主键 | 主键是一行数据的唯一标识<br>要求非空且唯一       | primary key |
| 默认 | 保持数据时，如果未指定该字段的值<br>则存入默认值 | default     |
| 外键 | 让两张表建立连接，保证数据的唯一性和完整性       | foreign key |

> 我们用约束来改造上面的表结构：
>
> 1. id唯一标识
> 2. username非空且唯一
> 3. name非空
> 4. gander默认值为1
>
> 先删除表，对表右键![image-20240314223128109](D:\text1\9.MySQL\assets\image-20240314223128109.png)，再创建：

![image-20240314223342435](D:\text1\9.MySQL\assets\image-20240314223342435.png)

> 我添加name然后提交，提示name不能为null：

![image-20240314223527854](D:\text1\9.MySQL\assets\image-20240314223527854.png)

> 加上name值直接提交，gander有默认值1：

![image-20240314223643058](D:\text1\9.MySQL\assets\image-20240314223643058.png)

> 增加数据，username依旧是tom，报错数据重复，因为username唯一(Duplicate：重复)：

![image-20240314224016913](D:\text1\9.MySQL\assets\image-20240314224016913.png)

> 我把id2改为1，再提交报错，提示id是主键，不能重复：

![image-20240314224354606](D:\text1\9.MySQL\assets\image-20240314224354606.png)



#### 主键自增

```sql
auto_increment
```

> 主键自增关键字，对主键字段使用，主键类型应为数值类型，不能是字符串类型，否则报错：

![image-20240314224940241](D:\text1\9.MySQL\assets\image-20240314224940241.png)



## 案例

> 根据页面原型来创建合适的表结构，以员工管理模块为例，字段要求如下：

| 字段名   | 必填/选填 | 类型         | 长度限制 | 输入限制                             | 是否唯一 | 提示语                       |
| -------- | --------- | ------------ | -------- | ------------------------------------ | -------- | ---------------------------- |
| 用户名   | 必填      | 输入框       | 2-20     | 数字、字母                           | 是       | 当前用户名已存在，请重新输入 |
| 员工姓名 | 必填      | 输入框       | 2-10     | 汉字                                 | 否       |                              |
| 性别     | 必填      | 下拉框       |          | 选择男/女                            | 否       |                              |
| 头像     | 选填      | 图片上传     | 2M       | 图片大小<=2M                         | 否       | 图片过大上传失败             |
| 职位     | 选填      | 下拉框       |          | 选择班主任、讲师、学工主管、教研主管 | 否       |                              |
| 入职时间 | 选填      | 日期选择组件 |          | YYYY-MM-DD                           | 否       |                              |
| 归属部门 | 选填      | 下拉框       |          | 管理部门表数据                       | 否       |                              |

> 在添加员工时，员工默认密码为123456，因此还有一个密码字段，使用IDEA图形化界面创建，声明表名和注释，表名建议使用tb_xxx的形式：

![image-20240317002252840](D:\text1\9.MySQL\assets\image-20240317002252840.png)

> 然后创建字段，首先创建id，为每条数据提供唯一标识：

![image-20240317003034628](D:\text1\9.MySQL\assets\image-20240317003034628.png)

> 用户名，非空和唯一：

![image-20240317003316068](D:\text1\9.MySQL\assets\image-20240317003316068.png)



![image-20240317003331718](D:\text1\9.MySQL\assets\image-20240317003331718.png)

> 密码，有默认值123456：

![image-20240317004107589](D:\text1\9.MySQL\assets\image-20240317004107589.png)

> 姓名：

![image-20240317004326535](D:\text1\9.MySQL\assets\image-20240317004326535.png)

> 性别，在项目中一般不将男或女存入表中，因为在页面展示比一定是男和女，也有男士女士这种，因此我们可以自己约定1代表男，2代表女，同时默认为男：

![image-20240317004729209](D:\text1\9.MySQL\assets\image-20240317004729209.png)

> 头像，存的是图片的url路径：

![image-20240317004938114](D:\text1\9.MySQL\assets\image-20240317004938114.png)

> 职位，有多种类型，与性别类似，约定1是班主任、2是讲师、3是学工主管、4是教研主管：

![image-20240317005228819](D:\text1\9.MySQL\assets\image-20240317005228819.png)

> 入职日期，格式是年月日：

![image-20240317005332660](D:\text1\9.MySQL\assets\image-20240317005332660.png)

> 归属部门暂不考虑，对于这种后台管理系统的表结构来说，我们一般会在表中添加两个通用字段，一个是创建时间，一个是修改时间，创建时间记录这条数据产生的时间，修改时间记录每次修改数据时的时间：

![image-20240317005704022](D:\text1\9.MySQL\assets\image-20240317005704022.png)

![image-20240317005758127](D:\text1\9.MySQL\assets\image-20240317005758127.png)



## 查询表

> 查询当前库中的所有表：

```sql
show tables;
```

![image-20240317133325746](D:\text1\9.MySQL\assets\image-20240317133325746.png)

> 查询指定表的表结构：

```sql
desc 表名;
```

![image-20240317133437647](D:\text1\9.MySQL\assets\image-20240317133437647.png)

> 查询建表语句，执行后就可以查看这张表的建表语句：

```sql
show create table 表名
```

![image-20240317133533965](D:\text1\9.MySQL\assets\image-20240317133533965.png)

> 或者选中表，ctrl+B：

![image-20240317133918841](D:\text1\9.MySQL\assets\image-20240317133918841.png)



## 修改表

> 1、添加字段：

```sql
alter table 表名 add 字段 类型 [comment 注释] [约束];
```

> 为tb_emp添加qq字段：

![image-20240317134907194](D:\text1\9.MySQL\assets\image-20240317134907194.png)

> 2、修改字段类型：

```sql
alter table 表名 modify 字段名 新类型 [comment 注释] [约束];
```

> 我将qq从varchar(11)改为varchar(13)：

![image-20240317135153482](D:\text1\9.MySQL\assets\image-20240317135153482.png)

> 3、修改字段名：

```sql
alter table 表名 change 旧字段名 新字段名 类型 [comment 注释] [约束];
```

> 我将qq改为qq_num：

![image-20240317135456349](D:\text1\9.MySQL\assets\image-20240317135456349.png)

> 4、删除字段：

```sql
alter table 表名 drop column 字段名;
```

> 删除qq_num字段：

![image-20240317135713161](D:\text1\9.MySQL\assets\image-20240317135713161.png)

> 5、修改表名：

```sql
rename table 旧表名 to 新表名;
```

![image-20240317135948160](D:\text1\9.MySQL\assets\image-20240317135948160.png)



## 删除表

```sql
drop table [if exists] 表名;
```

> if exists可选项，表示如果表存在才执行删除操作：

![image-20240317140700808](D:\text1\9.MySQL\assets\image-20240317140700808.png)



# 注意

> - DDL于数据库的操作中，命令中的database可以替换成schema、databases也可替换成schemas。
> - 删除表时，表中所有数据都会被删除