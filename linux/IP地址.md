# 1 IP地址的分类

```
公网IP：需申请、缴费的IP地址，由InterNIC机构负责

私网IP：私网IP局域网
```

# 2 公网IP地址分类

```
IPV4：4段，每段8位组成，共32位

范围：二进制：00000000.00000000.00000000.00000000-11111111.11111111.11111111.11111111
     十进制：0.0.0.0-255.255.255.255
     
共有：256*256*256*256=4,294,967,296-2
-2是因为代表主网的IP和广播号不能用
```

```
IP地址=网络IP+主机IP

子网掩码：用于标识IP地址的网络IP，也就是说通过子网掩码来判断IP地址哪段是网络IP哪段是主机IP

比如：192.168.1.118
其子网掩码为255.255.255.0
两个转换为2进制
11000000.10101000.00000001.01110110
11111111.11111111.11111111.00000000
子网中都是1的为网络IP，都是0的为主机IP

一般可以将网络IP连续的1的位数写在IP地址的后面
这就是IP地址的另一种表示：192.168.1.118/24

```

# 3 IP地址分为5类

```
A类IP:1.0.0.1-127.255.255.254
      A类IP的第一段为网络IP
      主机数量：16777216-2
      保留的私有IP：10.0.0.0-10.255.255.255

B类IP:128.00.1-191.255.255.254
      B类IP第一二段位网络IP
      主机数量：65536-2
      保留的私有IP：172.16.0.0-172.31.255.255

C类IP:192.0.0.1-233.255.255.254
	  C类IP前三段为网络IP
	  主机数量：256-2
      保留的私有IP：192.168.0.0-192.168.255.255

D类IP:保留IP，用于组播

E类IP:保留IP，用于科研
```

# 4 局域网划分

## 4.1 局域网子网划分

```
IP:192.168.1.133/24,计算子网IP和广播IP
```

```
第1步:将IP地址和子网掩码转换为二进制
IP:	      11000000.10101000.00000001.10000101
子网掩码:  11111111.11111111.11111111.00000000

第2步:将子网掩码是1的部分对应的IP不变,其余变成0,就是子网IP
子网IP:11000000.10101000.00000001.00000000
10进制表示:192.168.1.0/24

第3步:将子网掩码是1的部分对应的IP不变,其余变成1,就是子网的广播IP
广播IP:11000000.10101000.00000001.11111111
10进制表示:192.168.1.255/24
```

需求:公司申请了一个IP地址192.168.1.118/24,公司右3个部门:财务部(16台电脑),开发部(25台),人事部(12台),划分子网,满足各个部门的要求.

三个部门需要3个局域网,因此需要3个子网,给3个部门划分子网一般采用借位,网络IP向主机IP借位,将一个子网划分成多个子网.

```
第1步:网络IP借位主机IP增加子网,借位跟划分的子网数量成:2的借位次方
借1位:2^1=2个子网
借2位:2^2=4个子网
借3位:2^3=8个子网
...
3个子网只需借2位
192.168.1.118/24>>>192.168.1.118/26
借位后从0开始计算，即：192.168.1.0/26

第2步:将借位后的IP和子网掩码2进制表示
IP:      11000000.10101000.00000001.00000000
子网掩码:  11111111.11111111.11111111.11000000

第3步:计算子网IP和广播号
第1个子网：
子网IP:11000000.10101000.00010111.00000000
10进制:192.168.1.0

广播IP:11000000.10101000.00010111.00111111
10进制:192.168.1.63
主机数量：63-0-2=61

第二个子网：
从第一个子网63之后开始，那么子网IP为：192.168.1.64
2进制：11000000.10101000.00010111.01000000

广播IP：11000000.10101000.00010111.01111111
10进制：192.168.1.127
主机数量：127-64-2=61

第三个子网：
子网IP：192.168.1.128
2进制：11000000.10101000.00010111.10000000

广播IP：11000000.10101000.00010111.10111111
10进制：192.168.1.191
主机数量191-128-2=61

第4个子网：
子网IP：192.168.1.192
2进制：11000000.10101000.00010111.11000000

广播IP：11000000.10101000.00010111.11111111
2进制：192.168.1.255
主机数量：255-192-2=61
```

## 4.2局域网

处于同一个局域网中，网络IP相同，主机IP不同

## 4.3实验----桥接模式手动分配IP

在虚拟机桥接模式中，虚拟机的IP是由dhcp动态分配，也可以手动分配虚拟机的IP

桥接模式中，虚拟机和主机处于同一局域网，即两者网络IP相同，改为手动分配，也需要保证虚拟机和主机处于同一局域网

![image-20230701150830116](C:\Users\asus\Desktop\assets\image-20230701150830116.png) 

```
主机IP：192.168.1.122
2进制：11000000.10101000.00000001.01111010

子网掩码：255.255.255.0
2进制：11111111.11111111.11111111.00000000

计算得：
子网号：11000000.10101000.00000001.00000000
10进制：192.168.1.0
广播号：11000000.10101000.00000001.11111111
10进制：192.168.1.255

主机网关：192.168.1.1

若虚拟机使与主机处于同一局域网，则虚拟机主机IP范围[2,254],若局域网内还有其他主机则虚拟机主机IP应排除该IP避免主机IP冲突
```

进入ifcfg-ens33文件中，将第4行改为static，配置虚拟机IP和网关

![image-20230701151356954](C:\Users\asus\Desktop\assets\image-20230701151356954.png) 

重启网络服务

```
systemctl restart network
```

# 5 MAC地址、网关、IP地址、路由概念

$\textcolor{red}{MAC地址}$

```
MAC地址：物理地址，网络设备在出厂就分配好的地址，全球唯一，不可更改
```

```
局域网中不同主机之间相互通信是通过广播的形式，比如a向b通信，则a发送广播，b接收广播，但是一台主机发送广播时是对这个网络中的所有主机都发送广播，相当于所有主机都能接收到a的通信，如何保证只有b能接收a的通信而其他主机不能接收？a发送的广播中携带了b的MAC地址，只有b的MAC地址能与广播相匹配，其他的主机不能匹配，所以只有b能接收a的通信而其他主机不能接收。

既然MAC地址能作为主机的唯一标识，为什么需要IP地址呢？广播通信会向所有主机发送，试想一下，某一时刻，这个局域网中的所有主机互相通信，那么会产生庞大的广播信息，形成广播风暴。如果将这个局域网的范围扩大到全球，全球所有的主机发送的广播，一台主机需要将广播扩散到全球的其他所有主机上，就会形成究极庞大的广播风暴，为了解决这个问题，就需要缩小局域网的范围，在逻辑上就引出了IP地址的概念。
```

$\textcolor{red}{IP地址}$

```
在互联网上的唯一定位，区分不同的设备，在逻辑上将网络划分为小的子网，控制网络广播的范围
```

$\textcolor{red}{网关}$

```
不同的网络之间传输数据、网络通信需要网关 
```

$\textcolor{red}{路由}$

```
路由是什么？比如你要去北京，你可以选择坐动车，坐火车还可以选择坐飞机，你有很多条路可以选择到达北京。路由的概念与之类似。
```

```
准确来讲路由是用于在不同网络之间进行最佳通讯、传输数据的路径选择
```

